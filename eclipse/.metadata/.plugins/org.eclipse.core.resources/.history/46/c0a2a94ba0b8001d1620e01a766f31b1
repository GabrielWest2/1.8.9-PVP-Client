package customclient.mods;

import java.awt.Color;

import customclient.Main;
import customclient.Mod;
import customclient.gui.settings.CustomizableBooleanValue;
import net.minecraft.client.gui.Gui;
import net.minecraft.client.network.NetworkPlayerInfo;
import net.minecraft.client.resources.I18n;
import net.minecraft.util.ResourceLocation;

public class PingMod extends Mod {
	@CustomizableBooleanValue(defaultValue = true, uiName = "mod.ping.showHud")
	public boolean showHud = true;
	@CustomizableBooleanValue(defaultValue = true, uiName = "mod.ping.showBars")
	public boolean showBars = true;
	
	@CustomizableBooleanValue(defaultValue = false, uiName = "mod.ping.showTab")
	public boolean showInTab = false;
	
    public static final ResourceLocation icons = new ResourceLocation("textures/gui/icons.png");
	
	@Override
	public void OnUIRender() {
		this.hudWidth = 79;
		this.hudHeight = 25;
		int x = position.calculateX();
		int y = position.calculateY();
		
		NetworkPlayerInfo inf = mc.getNetHandler().getPlayerInfo(mc.thePlayer.getGameProfile().getId());
		if(inf == null)
			return;
		
		
		Gui.drawRect(x, y, x+this.hudWidth, y+this.hudHeight, new Color(0, 0, 0, 150).getRGB());
		String s = inf.getResponseTime() + " ms";
		fr.drawString(s, x+this.hudWidth/2-fr.getStringWidth(s)/2, y+hudHeight/2-fr.FONT_HEIGHT/2, -1);
		
		this.mc.getTextureManager().bindTexture(icons);
        int j = 0;

        if (networkPlayerInfoIn.getResponseTime() < 0)
        {
            j = 5;
        }
        else if (networkPlayerInfoIn.getResponseTime() < 150)
        {
            j = 0;
        }
        else if (networkPlayerInfoIn.getResponseTime() < 300)
        {
            j = 1;
        }
        else if (networkPlayerInfoIn.getResponseTime() < 600)
        {
            j = 2;
        }
        else if (networkPlayerInfoIn.getResponseTime() < 1000)
        {
            j = 3;
        }
        else
        {
            j = 4;
        }

        this.drawTexturedModalRect(p_175245_2_ + p_175245_1_ - 11, p_175245_3_, 0 + i * 10, 176 + j * 8, 10, 8);

		
	}
	
	
	@Override
	public String getName() {
		return I18n.format("mod.ping.name");
	}
	
	@Override
	public String getInternalName() {
		return "Ping Mod";
	}
}
